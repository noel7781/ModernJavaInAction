# Chapter 02 - λ™μ‘ νλΌλ―Έν„°ν™” μ½”λ“ μ „λ‹¬ν•κΈ°

μ†ν”„νΈμ›¨μ–΄λ¥Ό κ°λ°ν•λ‹¤λ³΄λ©΄ μ μ‚¬ν• λ™μ‘μ„ μν–‰ν•λ”λ°, κ·Έ λ™μ‘λ“¤ λ‚΄μ—μ„ μ•½κ°„μ μ°¨μ΄λ“¤λ§ λ°μƒν•λ” κ²½μ°κ°€ λ§λ‹¤. μ±…μ— λ‚μ¨ μλ¥Ό λ“¤μ–΄ 150κ·Έλ¨ μ΄μƒμΈ μ‚¬κ³Όλ¥Ό μ°Ύλ” μ‘μ—…μ΄λΌκ±°λ‚, λ¶‰μ€μƒ‰μΈ μ‚¬κ³Όλ¥Ό μ°Ύλ” μ‘μ—… λ‘κ°€μ§€ λ¨λ‘ μ‚¬κ³Όμ¤‘μ—μ„ νΉμ • μ΅°κ±΄μ„ λ§μ΅±ν•λ” κ²½μ°λ¥Ό μ°Ύλ”κ²ƒμΌλ΅ λ†’μ€ μ μ‚¬μ„±μ„ κ°€μ§€κ³  μλ‹¤. μ΄λ ‡κ² ν•„μ”ν• μΆ…λ¥λ§λ‹¤ λ§¤λ² ν•¨μλ¥Ό μ„ μ–Έν•λ©΄, ν•¨μ μμ²΄μ κ°―μλ„ λ§μ•„μ§€κ³  ν•¨μμ μ΄λ¦„λ„ κΈΈμ–΄μ§κ²ƒμ΄λ©° μƒλ΅μ΄ κΈ°λ¥μ„ μ¶”κ°€ν•κ±°λ‚ κΈ°μ΅΄μ κΈ°λ¥μ„ μ‚­μ ν•λ” κ²½μ°μ— μ¥κΈ°μ μΈ μΈ΅λ©΄μ—μ„ μ μ§€λ³΄μκ°€ μ•μΆ‹μ„ κ²ƒμ΄λΌκ³  μƒκ°ν•΄λ³Ό μ μλ‹¤.

λ™μ‘ νλΌλ―Έν„°ν™”(behavior parameterization)μ„ ν™μ©ν•λ©΄ μμ£Ό λ°”λ€λ” μ”κµ¬μ‚¬ν•­μ— ν¨κ³Όμ μΌλ΅ λ€μ‘ν•  μ μλ‹¤. λ‚λ” μ΄μ±…μ„ ν†µν•΄ μ΄ μ©μ–΄λ¥Ό μ²μ λ΄¤λ”λ°, μ΄ μ©μ–΄μ λ»μ€ `μ•„μ§μ€ μ–΄λ–»κ² μ‹¤ν–‰ν•  κ²ƒμΈμ§€ κ²°μ •ν•μ§€ μ•μ€ μ½”λ“ λΈ”λ΅` μ„ μλ―Έν•λ‹¤. μ¦‰, μ½”λ“λΈ”λ­μ μ‹¤ν–‰μ€ λ‚μ¤‘μΌλ΅ λ―Έλ¤„μ Έ λ‚μ¤‘μ— μ‹¤ν–‰λ  λ©”μ„λ“μ μΈμλ΅ μ½”λ“ λΈ”λ΅μ„ μ „λ‹¬ν•  μ μλ‹¤. μ¦‰ μ½”λ“ λΈ”λ­μ— λ”°λΌ λ©”μ„λ“μ λ™μ‘μ΄ νλΌλ―Έν„°ν™” λλ‹¤.

μ±…μ— λ‚μ™€μλ” μμ λ¥Ό ν†µν•΄ λ‹¨μν• κΈ°λ¥λ¶€ν„° μ‹μ‘ν•΄μ„ λ³€ν™”μ— λ€μ‘ν•  μ μλ” μ½”λ“ μ‘μ„±μ„ μ„ν• λ‹¨κ³„λ¥Ό κ°„λ‹¨ν λ°μ•„λ³΄μ.

μ΅°κ±΄μ— λ§λ” μ‚¬κ³Όλ¥Ό μ–»λ” ν•„ν„°λ§ κ³Όμ •μ„ μ§„ν–‰ν•λ‹¤.

μƒ‰μ€ λ‹¤μκ³Ό κ°™μ΄ λ‘κ°€μ§€κ°€ μ΅΄μ¬ν•λ‹¤.

```java
enum Color { RED, GREEN }
```

μ΄κΈ° μ”κµ¬μ‚¬ν•­μ΄ λ‹¨μν•μ—¬ λ…Ήμƒ‰ μ‚¬κ³Όλ¥Ό μ–»κΈ° μ„ν•΄ μ½”λ“λ¥Ό μ‘μ„±ν•΄λ³΄μ.

```java
public static List<Apple> filterGreenApples(List<Apple> apples) {
	List<Apple> result = new ArrayList();
	for (Apple apple : apples) {
		if (GREEN.eqauls(apple.getColor()) {
			result.add(apple);
		}
	}
	return result;
}
```

λΉ¨κ°„μ‚¬κ³Όλ¥Ό μ–»μ–΄μ•Ό ν•λ‹¤λ©΄ ν•¨μλ…μ„ `filterRedApples` λ΅ λ³€κ²½ν•κ³  ifλ¬Έμ λ΅μ§μ„ λ°”κΎΈλ©΄ μ›ν•λ” κ²°κ³Όλ¥Ό μ–»μ„ μ μκ² λ‹¤.

κ·Έλ¬λ©΄ λ™μΌν• μ½”λ“λ¥Ό λ°λ³µν•λ” λ¶€λ¶„μ΄ λ§μ€λ°, μ½”λ“λ¥Ό λ°λ³µν•μ§€ μ•κ³  κµ¬λ³„ν•λ” λ°©λ²•μ„ μƒκ°ν•΄λ³΄λ©΄, μƒ‰μ„ νλΌλ―Έν„°ν™” ν•  μ μλ„λ΅ λ©”μ„λ“μ— νλΌλ―Έν„°λ¥Ό μ¶”κ°€ν•λ©΄ λ³€ν™”μ— λ€μ‘ν•  μ μλ‹¤.

```java
public static List<Apple> filterApplesByColor(List<Apple> apples, Color color) {
    List<Apple> result = new ArrayList();
    for (Apple apple : apples) {
        if (apple.getColor().equals(color)) {
            result.add(apple);
        }
    }
    return result;
} 
```

κ°„λ‹¨ν•λ‹¤. λ©”μ„λ“ λ‚΄ λ΅μ§μ— μλ λ¶€λ¶„μ„ νλΌλ―Έν„°λ΅ κΊΌλ‚΄λ©΄ μ΅°κΈ λ” μ μ—°ν•΄μ§„λ‹¤.

μ΄μ  μ‚¬κ³Όμ μƒ‰ λΏλ§ μ•„λ‹λΌ μ‚¬κ³Όμ λ¬΄κ²λ΅ μ›ν•λ” μ‚¬κ³Όλ¥Ό μ–»κ³ μ‹¶λ‹¤λ©΄ νλΌλ―Έν„°λ΅ λ¬΄κ²λ¥Ό μ£Όλ©΄ λλ‹¤.

ν•μ§€λ§ μƒ‰μ„ κµ¬λ³„ν•λ” κ²½μ°λ„, λ¬΄κ²λ¥Ό κµ¬λ³„ν•λ” κ²½μ°λ„ μ½”λ“κ°€ λ§¤μ° μ μ‚¬ν• λ¶€λ¶„μ΄ λ§κ³  μ΄λ” `DRY(Don't Repeat Yourself)` μ›μΉ™μ„ μ–΄κΈ°λ” κ²ƒμ΄λ‹¤.

μ±…μ—μ„ λ‹¤μμ— μ‹λ„ν•  μ μλ” λ°©λ²•μΌλ΅ ν”λκ·Έλ¥Ό μ κ³µν–λ”λ°, μ‚¬μ‹¤ κΈ°μ΅΄μ— μ¤μ¤λ΅ μ½”λ“λ¥Ό μ‘μ„±ν•  λ• ν”λκ·Έλ¥Ό ν†µν•΄ μ²λ¦¬ν• κ²½ν—μ΄ λ„λ¬΄λ‚λ„ λ§μ€λ°, μ”κµ¬μ‚¬ν•­μ λ³€κ²½μ— λ”°λ¥Έ μ½”λ“ μμ •μ΄ μ μ—°ν•μ§€ μ•λ‹¤λ” κ²ƒμ€ λκΌλ‹¤.

μ§€κΈκΉμ§€ μ •λ¦¬ν•λ©΄, μƒλ΅μ΄ νλΌλ―Έν„°λ¥Ό μ¶”κ°€ν•λ” κ²½μ° κ·Έ νλΌλ―Έν„°μ— κ΄€ν• κ°’μ—λ” λ§¤μ° μ μ—°ν•΄μ§ μ μμΌλ‚ (μƒ‰μΌλ΅λ§ κµ¬λ³„ν•λ” κ²½μ°), λ¬΄κ²λ΅ κµ¬λ³„ν•κ³ μ ν•λ” κ²½μ° μ μ—°μ„±μ΄ λ§¤μ° λ–¨μ–΄μ§ μ μκ³ , ν”λκ·Έ λν• ν™•μ¥μ„±μ΄ λ–¨μ–΄μ§„λ‹¤.

## λ™μ‘ νλΌλ―Έν„°ν™”

μ΄λ¬ν• κ²½μ°μ— μ μ—°ν• μ½”λ“λ¥Ό μ‘μ„±ν•κΈ° μ„ν•μ—¬ λ™μ‘ νλΌλ―Έν„°ν™”λ¥Ό μ΄μ©ν•  μ μλ‹¤.

```java
public static List<Apple> filterApplesByColor(List<Apple> apples, ApplePredicate p) {
  List<Apple> result = new ArrayList();
  for (Apple apple : apples) {
      if (p.test(apple)) {
          result.add(apple);
      }
  }
  return result;
}
```

ApplePredicate μΈν„°νμ΄μ¤λ” `boolean test(Apple apple)` ν•λ‚μ ν•¨μλ§μ„ κ°€μ§€κ³  μλ‹¤. κ·Έλ¬λ©΄ μ΄μ  μ¤‘λ³µλλ” μ½”λ“λ¥Ό μ‘μ„±ν•  ν•„μ”κ°€ μ—†μ–΄μ§€κ³ , μ›ν•λ” μ΅°κ±΄μ„ `ApplePredicate` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν•νƒλ΅λ§ μ‘μ„±ν•΄μ¤μ„ μΈμλ΅ μ „λ‹¬ν•΄μ£Όλ©΄ λλ”κ²ƒμ΄λ‹¤. μλ¥Ό λ“¤μλ©΄ λ…Ήμƒ‰ μ‚¬κ³Όλ¥Ό μ„ νƒν•κ³ μ ν–μ„λ•

```java
public class AppleGreenColorPredicate implements ApplePredicate {
	public boolean test(Apple apple) {
		return GREEN.equals(apple.getColor());
	}
}
```

 λλ‹¤. κ°μΈμ μΌλ΅ λ§μ΅±μ¤λ½μ§€λ” μ•λ‹¤.

κ²½ν—μ΄ λ§μ§€ μ•μ•„μ„ κ·Έλ°κ°€ κ·Έλ°λ° λ³΄ν†µ μ΄λ° μ΅°κ±΄λ“¤μ€ λ§μ΄ μ‚¬μ©ν•μ§€ μ•μ§€ μ•λ‚?? λΌλ” μƒκ°μ΄ λ“¤κΈ°λ„ ν•λ‹¤.

κ·Έλμ„ μ±…μ—μ„λ„ μ΅°κΈ λ” λ‹¨κ³„λ¥Ό λ‚κ°€μ£Όκ³  μλ‹¤. π‘

```java
List<Apple> redApples = filterApples(apples, new ApplePredicate() {
    public boolean test(Apple apple) {
        return RED.equals(apple.getColor());
    }
});
```

μ•„κΉλ³΄λ‹¤ μΆ‹μ•„μ΅λ‹¤.

κ·Έλ¦¬κ³  `μλ°” 8` λ¶€ν„° μ΄λ ‡κ² ν•λ‚μ ν•¨μλ§ μ‚¬μ©ν•λ” ν•¨μν• μΈν„°νμ΄μ¤μ κ²½μ° λλ‹¤λ΅ 

```java
List<Apple> redApples = filterApples(apples, apple ->
      RED.equals(apple.getColor())
);
```

μ™€ κ°™μ΄ λ” κ°„λ‹¨ν•κ² μ¤„μΌ μ μλ‹¤.

λλ‹¤λ„ μ‚¬μ‹¤ λ’·λ‹¨μ›μ— λ‚μ¤κ³  Callableλ¶€λ¶„μ Futureλ„ λ’·λ‹¨μ›μ λ³‘λ ¬ μ‹¤ν–‰ λ¶€λ¶„μ—μ„ λ‹¤λ£¬λ‹¤κ³  ν•λ‹ μ§€κΈ λ‹Ήμ¥ κΉκ² μƒκ°ν•΄λ³΄μ§€ μ•κ³  κ°„λ‹¨ν Runnableκ³Ό Callableμ μ°¨μ΄μ λ§ μ°Ύμ•„λ΄¤λ”λ°, λ‚΄μ©μ •λ¦¬λ¥Ό λ’·λ¶€λ¶„μ λ‚΄μ©μ„ λ°°μ΄ ν›„ λ‹¤μ‹ μ •λ¦¬ν•  κ²ƒμ΄λ‹¤.

<details>
<summary>Runnable, Callable</summary>


μ“°λ λ“λ΅ μ‹¤ν–‰ν•  μ‘μ—…μ„ μ•λ ¤μ£Όλ” κ²ƒμΌλ΅ κΈ°μ΅΄μ—λ” μ΄ μΈν„°νμ΄μ¤λ°–μ— μ•μ§€ λ»ν–λ‹¤. Runnable μΈν„°νμ΄μ¤κ°€ κ°€μ§€κ³ μλ” `public void run()` λ©”μ„λ“μ λ¦¬ν„΄νƒ€μ…μ„ λ³΄λ‹¤μ‹ν”Ό voidνƒ€μ…μ΄λΌ κ°’μ„ λ¦¬ν„΄ν•μ§€ λ»ν•λ‹¤.

```java
public static void main(String[] args) {
    System.out.println("Hello world!");
    Thread t = new Thread(new Runnable() {
        @Override
        public void run() throws Exception {
            throw new Exception("thr exception");
        }
    });
    t.start();
}

==> java: run() in <anonymous Main$1> cannot implement run() in java.lang.Runnable
    overridden method does not throw java.lang.Exception
```

`run()` λ©”μ„λ“μ— Exceptionμ„ λμ§€λ„λ΅ ν•λ ¤κ³  ν•λ©΄, Runnable μΈν„°νμ΄μ¤μ runμ΄ exceptionμ„ λμ§€μ§€ μ•λ” ν•νƒμ΄λ―€λ΅ try-catchλ¬ΈμΌλ΅ μ‘μ„±ν•΄μ•Ό ν•λ‹¤.

λ°λ©΄μ— Callable μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ Callableμ€ λ¦¬ν„΄νƒ€μ…μ΄ voidκ°€ μ•„λ‹ ObjectλΌ κ°’μ„ λ¦¬ν„΄ν•  μ μκ³ , μμ™Έλ¥Ό λμ§μ μλ‹¤.

```java
public static void main(String[] args) throws Exception {
    System.out.println("Hello world!");
    Callable<String> t = new Callable() {
        @Override
        public Object call() throws Exception {
            throw new Exception("thr exception");
        }
    };
    t.call();
}
```




~~λ‘λ‹¤ Functional Interfaceλ΅ λλ‹¤λ¥Ό μ‚¬μ©ν•μ—¬ κ°„λ‹¨ν μ‘μ„±ν•  μ μλ”λ°, μ–΄λ–¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν–λ”μ§€ μ»΄νμΌλ¬κ°€ κµ¬λ³„ν•μ§€ λ»ν•λ” κ²½μ°κ°€ μλ‹¤κ³  λ“¤μ—λ‹¤. μ΄κ±΄ λ‚μ¤‘μ— μ±…μ—μ„ Futureμ„ λ‹¤λ£¨λ©΄ μ§μ ‘ ν…μ¤νΈλ¥Ό λ§λ“¤μ–΄λ³΄λ©° ν…μ¤νΈν•΄λ³΄κ³  κ·Έ κΈ€μ— λ‹¤μ‹ μ •λ¦¬ν•κ² λ‹¤.~~



</details>
